{{- if .IsBlock -}}

  <div class="image">
    <figure>
      <button class="image__button" popovertarget="  {{ math.Rand | mul 1234 | math.Ceil }}  " popovertargetaction="show">
        <img src="{{ .Destination | safeURL }}" 
          {{- with .PlainText }} alt="{{ . }}" {{ end -}}
        >
      </button>
      {{- with .Title }}<figcaption>{{ . }}</figcaption>{{ end -}}
    </figure>
  </div>
  <dialog popover class="image__lightbox" id="{{ .Destination | safeURL }}">
    <button popovertarget="{{ .Destination | safeURL }}" popovertargetaction="hide">
      Fermer le lightbox
    </button>
    <img src="{{ .Destination | safeURL }}" 
      {{- with .PlainText }} alt="{{ . }}" {{ end -}} 
      {{- with .Title }} title="{{ . }}" {{ end -}}
    >
  </dialog>

{{- else -}}

  <div class="image">
    <img src="{{ .Destination | safeURL }}" 
      {{- with .PlainText }} alt="{{ . }}" {{ end -}} 
      {{- with .Title }} title="{{ . }}" {{ end -}}
    >
    <dialog popover class="image__lightbox" id="{{ .Destination | safeURL }}">
      <button popovertarget="{{ .Destination | safeURL }}" popovertargetaction="hide">
        Fermer le lightbox
      </button>
      <img src="{{ .Destination | safeURL }}" 
        {{- with .PlainText }} alt="{{ . }}" {{ end -}} 
        {{- with .Title }} title="{{ . }}" {{ end -}}
      >
    </dialog>
  </div>

{{- end -}}